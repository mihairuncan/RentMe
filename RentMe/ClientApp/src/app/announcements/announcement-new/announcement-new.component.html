<div class="row py-5 mt-4 align-items-center">
  <!-- For Demo Purpose -->
  <div class="col-md-6 pr-lg-5 mb-5 mb-md-0 text-center">
    <h1>Add new announcement</h1>
    <form [formGroup]="newAnnouncementForm" (ngSubmit)="addNewAnnouncement()">
      <div class="row">

        <!-- Title -->
        <div class="input-group col-lg-6 mb-4">
          <div class="input-group-prepend">
            <span class="form-control input-group-text bg-white px-4 border-md border-right-0" [ngClass]="{'is-invalid': newAnnouncementForm.get('title').errors 
            && newAnnouncementForm.get('title').touched}">
              <i class="fa fa-user text-muted"></i>
            </span>
          </div>
          <input type="text" [ngClass]="{'is-invalid': newAnnouncementForm.get('title').errors 
            && newAnnouncementForm.get('title').touched}" class="form-control" formControlName="title"
            placeholder="Title" class="form-control bg-white border-md">
          <div class="invalid-feedback"
            *ngIf="newAnnouncementForm.get('title').touched && newAnnouncementForm.get('title').hasError('required')">
            Title is required
          </div>
        </div>

        <!-- Description -->
        <div class="input-group col-lg-6 mb-4">
          <div class="input-group-prepend">
            <span class="form-control input-group-text bg-white px-4 border-md border-right-0" [ngClass]="{'is-invalid': newAnnouncementForm.get('description').errors 
            && newAnnouncementForm.get('description').touched}">
              <i class="fa fa-user text-muted"></i>
            </span>
          </div>
          <input type="text" [ngClass]="{'is-invalid': newAnnouncementForm.get('description').errors 
            && newAnnouncementForm.get('description').touched}" class="form-control" formControlName="description"
            placeholder="Description" class="form-control bg-white border-md">
          <div class="invalid-feedback"
            *ngIf="newAnnouncementForm.get('description').touched && newAnnouncementForm.get('description').hasError('required')">
            Description is required
          </div>
        </div>

        <!-- Rent Price -->
        <div class="input-group col-lg-12 mb-4">
          <div class="input-group-prepend">
            <span class="form-control input-group-text bg-white px-4 border-md border-right-0" [ngClass]="{'is-invalid': newAnnouncementForm.get('rentPrice').errors 
            && newAnnouncementForm.get('rentPrice').touched}">
              <i class="fa fa-eur text-muted"></i>
            </span>
          </div>
          <input type="number" min="0.000001" [ngClass]="{'is-invalid': newAnnouncementForm.get('rentPrice').errors 
            && newAnnouncementForm.get('rentPrice').touched}" class="form-control" formControlName="rentPrice"
            placeholder="Rent Price" class="form-control bg-white border-md text-right">
          <select name="rentPeriod" formControlName="rentPeriod" [ngClass]="{'is-invalid': newAnnouncementForm.get('rentPeriod').errors 
                    && newAnnouncementForm.get('rentPeriod').touched}" class="form-control" required>
            <option value="day">per day</option>
            <option value="week">per week</option>
            <option value="month">per month</option>
            <option value="year">per year</option>
          </select>


          <div class="invalid-feedback"
            *ngIf="newAnnouncementForm.get('rentPrice').touched && newAnnouncementForm.get('rentPrice').hasError('required')">
            Rent Price is required
          </div>
        </div>

        <!-- Category -->
        <div class="input-group col-lg-12 mb-4">
          <div class="input-group-prepend">
            <span class="form-control input-group-text bg-white px-4 border-md border-right-0" [ngClass]="{'is-invalid': newAnnouncementForm.get('category').errors 
                  && newAnnouncementForm.get('category').touched}">
              <i class="fa fa-phone-square text-muted"></i>
            </span>
          </div>

          <select (change)="loadSubcategories()" name="category" formControlName="category" [ngClass]="{'is-invalid': newAnnouncementForm.get('category').errors 
            && newAnnouncementForm.get('category').touched}" class="form-control" required>
            <option value=""> - choose category - </option>
            <option *ngFor="let category of categories" value={{category.name}}>{{category.displayName}}</option>
          </select>

          <div class="invalid-feedback"
            *ngIf="newAnnouncementForm.get('category').touched && newAnnouncementForm.get('category').hasError('required')">
            Category is required
          </div>
        </div>


        <!-- Subcategory Name -->
        <div *ngIf="newAnnouncementForm.get('category').valid" class="input-group col-lg-12 mb-4">
          <div class="input-group-prepend">
            <span class="form-control input-group-text bg-white px-4 border-md border-right-0" [ngClass]="{'is-invalid': newAnnouncementForm.get('subcategoryName').errors 
                  && newAnnouncementForm.get('subcategoryName').touched}">
              <i class="fa fa-phone-square text-muted"></i>
            </span>
          </div>

          <select name="subcategoryName" formControlName="subcategoryName" [ngClass]="{'is-invalid': newAnnouncementForm.get('subcategoryName').errors 
            && newAnnouncementForm.get('subcategoryName').touched}" class="form-control" required>
            <option value=""> - choose subcategory - </option>
            <option *ngFor="let subcategory of subcategories" value={{subcategory.name}}>{{subcategory.displayName}}
            </option>
          </select>

          <div class="invalid-feedback"
            *ngIf="newAnnouncementForm.get('subcategoryName').touched && newAnnouncementForm.get('subcategoryName').hasError('required')">
            Subcategory is required
          </div>
        </div>

        <!-- Submit Button -->
        <div class="form-group col-lg-12 mx-auto mb-0">
          <button class="btn btn-primary btn-block py-2" [disabled]="!newAnnouncementForm.valid" type="submit">
            <i class="fa fa-floppy-o mr-2"></i><span class="font-weight-bold">Save your announcement</span>
          </button>
        </div>

        <!-- Divider Text -->
        <div class="form-group col-lg-12 mx-auto d-flex align-items-center my-4">
          <div class="border-bottom w-100 ml-5"></div>
          <span class="px-2 small text-muted font-weight-bold text-muted"></span>
          <div class="border-bottom w-100 mr-5"></div>
        </div>

        <!-- Already Registered -->
        <div class="text-center w-100">
          <p class="text-muted font-weight-bold">Already Registered?
            <a class="text-primary ml-2" [routerLink]="['/login']">Login</a>
          </p>
        </div>
      </div>
    </form>
  </div>

  <!-- New Announcement Form -->
  <div class="col-md-6 col-lg-6 ml-auto">
    <div class="col-md-3">

        <h3>Add photos</h3>

        <div ng2FileDrop [ngClass]="{'nv-file-over': hasBaseDropZoneOver}" (fileOver)="fileOverBase($event)"
            [uploader]="uploader" class="card bg-faded p-3 text-center mb-3 my-drop-zone">
            <i class="fa fa-upload fa-3x"></i>
            Drop Photos Here
        </div>

        Multiple
        <input type="file" ng2FileSelect [uploader]="uploader" multiple /><br />

        Single
        <input type="file" ng2FileSelect [uploader]="uploader" />
    </div>

    <div class="col-md-9" style="margin-bottom: 40px" *ngIf="uploader?.queue?.length">

        <h3>Upload queue</h3>
        <p>Queue length: {{ uploader?.queue?.length }}</p>

        <table class="table">
            <thead>
                <tr>
                    <th width="50%">Name</th>
                    <th>Size</th>

                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let item of uploader.queue">
                    <td><strong>{{ item?.file?.name }}</strong></td>
                    <td *ngIf="uploader.options.isHTML5" nowrap>{{ item?.file?.size/1024/1024 | number:'.2' }} MB</td>
                </tr>
            </tbody>
        </table>

        <div>
            <div>
                Queue progress:
                <div class="progress mb-4">
                    <div class="progress-bar" role="progressbar" [ngStyle]="{ 'width': uploader.progress + '%' }"></div>
                </div>
            </div>
            <button type="button" class="btn btn-success btn-s" (click)="uploader.uploadAll()"
                [disabled]="!uploader.getNotUploadedItems().length">
                <span class="fa fa-upload"></span> Upload
            </button>
            <button type="button" class="btn btn-warning btn-s" (click)="uploader.cancelAll()"
                [disabled]="!uploader.isUploading">
                <span class="fa fa-ban"></span> Cancel
            </button>
            <button type="button" class="btn btn-danger btn-s" (click)="uploader.clearQueue()"
                [disabled]="!uploader.queue.length">
                <span class="fa fa-trash"></span> Remove
            </button>
        </div>
    </div>
  </div>
</div>